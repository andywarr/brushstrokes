{"ts":1361569646755,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"function brushStrokes(data) {\n  var canvas = document.getElementById(data.canvas.id);\n  var rect;\n  var context = canvas.getContext(\"2d\");\n  var font = {\n    'color': \"rgba(\" + data.font.color.r +\", \" + data.font.color.g + \", \" + data.font.color.b + \", \" + data.font.color.a + \")\" || \"rgba(0,0,0,1)\",\n    'family': data.font.family || 'sans-serif',\n    'size': data.font.size || 25,\n    'style': data.font.style || \"normal\",\n    'weight': data.font.weight || \"normal\"\n  };\n  var content = {\n    'text': data.content.text || \"Sample\",\n    'x': data.content.x || 0,\n    'y': data.content.y || font.size\n  }\n\n  var init = function() {\n    canvas.height = data.canvas.height;\n    canvas.width = data.canvas.width;\n\n    context.fillStyle = \"white\";\n    context.fillRect(0, 0, canvas.width, canvas.height);\n\n    context.font = font.style + \" \" + font.weight + \" \" + font.size + \"px \" + font.family;\n    context.fillStyle = font.color;\n\n    context.fillText(content.text, content.x, content.y);\n\n    console.log(context.measureText(data.content.text).width/2);\n\n    rect = canvas.getBoundingClientRect();\n\n    canvas.addEventListener(\"mousemove\", function(e) {brushMoved(e)}, false);\n  };\n\n  var brushMoved = function(e){\n\n    var x = e.clientX - rect.left;\n    var y = e.clientY - rect.top;\n\n    var pixelRGBA = getColor(x, y);\n\n    console.log(pixelRGBA);\n  };\n\n  var getColor = function(x, y) {\n    return context.getImageData(x, y, 1, 1).data;\n  };\n\n  init();\n}\n\nvar bs = new brushStrokes({'canvas': {'id': 'canvas', 'height': getHeight(), 'width': getWidth()}, 'font':{'color': {'r': 0, 'g': 0, 'b': 0, 'a': 1}, 'family': 'Verdana', 'size': 50, 'style': 'normal', 'weight': \"normal\"}, 'content':{'text': 'Andrew Warr'}});\n\nfunction getHeight() {\n    return Math.max(\n        Math.max(document.body.scrollHeight, document.documentElement.scrollHeight),\n        Math.max(document.body.offsetHeight, document.documentElement.offsetHeight),\n        Math.max(document.body.clientHeight, document.documentElement.clientHeight)\n    );\n}\n\nfunction getWidth() {\n    return Math.max(\n        Math.max(document.body.scrollWidth, document.documentElement.scrollWidth),\n        Math.max(document.body.offsetWidth, document.documentElement.offsetWidth),\n        Math.max(document.body.clientWidth, document.documentElement.clientWidth)\n    );\n}"]],"start1":0,"start2":0,"length1":0,"length2":2328}]],"length":2328}
{"contributors":[],"silentsave":false,"ts":1361570879503,"patch":[[{"diffs":[[-1,"function brushStrokes(data) {\n  var canvas = document.getElementById(data.canvas.id);\n  var rect;\n  var context = canvas.getContext(\"2d\");\n  var font = {\n    'color': \"rgba(\" + data.font.color.r +\", \" + data.font.color.g + \", \" + data.font.color.b + \", \" + data.font.color.a + \")\" || \"rgba(0,0,0,1)\",\n    'family': data.font.family || 'sans-serif',\n    'size': data.font.size || 25,\n    'style': data.font.style || \"normal\",\n    'weight': data.font.weight || \"normal\"\n  };\n  var content = {\n    'text': data.content.text || \"Sample\",\n    'x': data.content.x || 0,\n    'y': data.content.y || font.size\n  }\n\n  var init = function() {\n    canvas.height = data.canvas.height;\n    canvas.width = data.canvas.width;\n\n    context.fillStyle = \"white\";\n    context.fillRect(0, 0, canvas.width, canvas.height);\n\n    context.font = font.style + \" \" + font.weight + \" \" + font.size + \"px \" + font.family;\n    context.fillStyle = font.color;\n\n    context.fillText(content.text, content.x, content.y);\n\n    console.log(context.measureText(data.content.text).width/2);\n\n    rect = canvas.getBoundingClientRect();\n\n    canvas.addEventListener(\"mousemove\", function(e) {brushMoved(e)}, false);\n  };\n\n  var brushMoved = function(e){\n\n    var x = e.clientX - rect.left;\n    var y = e.clientY - rect.top;\n\n    var pixelRGBA = getColor(x, y);\n\n    console.log(pixelRGBA);\n  };\n\n  var getColor = function(x, y) {\n    return context.getImageData(x, y, 1, 1).data;\n  };\n\n  init();\n}\n\n"],[0,"var "]],"start1":0,"start2":0,"length1":1464,"length2":4}]],"length":868,"saved":false}
{"ts":1361570910526,"patch":[[{"diffs":[[0,"s = new "],[-1,"b"],[1,"B"],[0,"rushStro"]],"start1":5,"start2":5,"length1":17,"length2":17},{"diffs":[[0,"arr'}});"],[1,"\nbs.init();"],[0,"\n\nfuncti"]],"start1":251,"start2":251,"length1":16,"length2":27}]],"length":879,"saved":false}
{"ts":1361581344947,"patch":[[{"diffs":[[0,"canvas',"],[1," 'color': {'r': 255, 'g': 255, 'b': 255, 'a': 1},"],[0," 'height"]],"start1":45,"start2":45,"length1":16,"length2":65}]],"length":928,"saved":false}
{"contributors":[],"silentsave":false,"ts":1361809375567,"patch":[[{"diffs":[[0,"w Warr'}"],[1,", 'brush': {'width':5}"],[0,"});\nbs.i"]],"start1":297,"start2":297,"length1":16,"length2":38}]],"length":950,"saved":false}
